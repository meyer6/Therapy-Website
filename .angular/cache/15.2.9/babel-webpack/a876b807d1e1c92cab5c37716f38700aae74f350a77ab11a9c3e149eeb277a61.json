{"ast":null,"code":"import { colours } from 'src/app/websiteData/colours';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../window-width.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../module-filterer/module-filterer.component\";\nfunction CarouselComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-module-filterer\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const module1_r4 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"width\", (100 / ctx_r1.module.modules.length).toString() + \"%\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"module\", module1_r4);\n  }\n}\nfunction CarouselComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵlistener(\"click\", function CarouselComponent_div_6_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const i_r7 = restoredCtx.index;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.currentPosition = i_r7);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r7 = ctx.index;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"background\", i_r7 == ctx_r2.currentPosition ? ctx_r2.colours.font1 : \"\");\n  }\n}\nfunction CarouselComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 10, 11)(2, \"div\", 12);\n    i0.ɵɵlistener(\"click\", function CarouselComponent_div_7_Template_div_click_2_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.currentPosition = (ctx_r11.currentPosition - 1 + ctx_r11.module.modules.length) % ctx_r11.module.modules.length);\n    });\n    i0.ɵɵelement(3, \"i\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 12);\n    i0.ɵɵlistener(\"click\", function CarouselComponent_div_7_Template_div_click_4_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.currentPosition = (ctx_r13.currentPosition + 1) % ctx_r13.module.modules.length);\n    });\n    i0.ɵɵelement(5, \"i\", 14);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const _r10 = i0.ɵɵreference(1);\n    const ctx_r3 = i0.ɵɵnextContext();\n    const _r0 = i0.ɵɵreference(2);\n    i0.ɵɵstyleProp(\"top\", -_r0.offsetHeight / 2, \"px\")(\"margin-bottom\", -_r10.offsetHeight, \"px\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"color\", ctx_r3.colours.font1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"color\", ctx_r3.colours.font1);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"background\": a0\n  };\n};\nexport let CarouselComponent = /*#__PURE__*/(() => {\n  class CarouselComponent {\n    constructor(windowService) {\n      this.windowService = windowService;\n      this.colours = colours;\n      this.currentPosition = 0;\n      this.startX = 0.1;\n      this.currentX = 0.1;\n      this.module = {\n        type: 'carousel',\n        backgroundColour: '',\n        modules: []\n      };\n    }\n    // Called when user tries to drag the carousel to move it\n    drag(event) {\n      // Determines if event is from mouse (Desktop) or touch (Mobile)\n      if (event instanceof MouseEvent) {\n        // Defines the starting x coordinate to determine how to move the carousel\n        this.startX = event.clientX;\n        this.currentX = event.clientX;\n        // Updates the current mouse postion\n        const mouseMoveFunction = event => {\n          this.currentX = event.clientX;\n        };\n        document.addEventListener('mousemove', mouseMoveFunction);\n        // Moves the carousel if necessary\n        document.addEventListener('mouseup', () => {\n          releaseFunction();\n          document.removeEventListener('mousemove', mouseMoveFunction);\n        }, {\n          once: true\n        });\n      } else {\n        // Same as previous but for mobile\n        this.startX = event.changedTouches[0].clientX;\n        this.currentX = event.changedTouches[0].clientX;\n        const touchMoveFunction = event => {\n          this.currentX = event.changedTouches[0].clientX;\n        };\n        document.addEventListener('touchmove', touchMoveFunction);\n        document.addEventListener('touchend', () => {\n          releaseFunction();\n          document.removeEventListener('touchmove', touchMoveFunction);\n        }, {\n          once: true\n        });\n      }\n      const releaseFunction = () => {\n        // Determines how and if the carousel should move\n        if (this.currentX - this.startX > 75) {\n          this.currentPosition = (this.currentPosition - 1 + this.module.modules.length) % this.module.modules.length;\n        } else if (this.startX - this.currentX > 75) {\n          this.currentPosition = (this.currentPosition + 1) % this.module.modules.length;\n        }\n        // Resets the x values for next move\n        this.startX = 0.1;\n        this.currentX = 0.1;\n      };\n    }\n  }\n  CarouselComponent.ɵfac = function CarouselComponent_Factory(t) {\n    return new (t || CarouselComponent)(i0.ɵɵdirectiveInject(i1.WindowWidthService));\n  };\n  CarouselComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CarouselComponent,\n    selectors: [[\"app-carousel\"]],\n    inputs: {\n      module: \"module\"\n    },\n    decls: 8,\n    vars: 12,\n    consts: [[1, \"container\", 3, \"mousedown\", \"touchstart\"], [1, \"modules-container\", 3, \"ngStyle\"], [\"carouselContainer\", \"\"], [1, \"module-container\"], [3, \"width\", 4, \"ngFor\", \"ngForOf\"], [1, \"dots-container\"], [\"class\", \"dot\", 3, \"background\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"arrows-container\", 3, \"top\", \"margin-bottom\", 4, \"ngIf\"], [3, \"module\"], [1, \"dot\", 3, \"click\"], [1, \"arrows-container\"], [\"arrowsContainer\", \"\"], [1, \"arrows\", 3, \"click\"], [1, \"fa\", \"fa-angle-left\"], [1, \"fa\", \"fa-angle-right\"]],\n    template: function CarouselComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵlistener(\"mousedown\", function CarouselComponent_Template_div_mousedown_0_listener($event) {\n          return ctx.drag($event);\n        })(\"touchstart\", function CarouselComponent_Template_div_touchstart_0_listener($event) {\n          return ctx.drag($event);\n        });\n        i0.ɵɵelementStart(1, \"div\", 1, 2)(3, \"div\", 3);\n        i0.ɵɵtemplate(4, CarouselComponent_div_4_Template, 2, 3, \"div\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵtemplate(6, CarouselComponent_div_6_Template, 1, 2, \"div\", 6);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(7, CarouselComponent_div_7_Template, 6, 8, \"div\", 7);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(10, _c0, ctx.module.backgroundColour));\n        i0.ɵɵadvance(2);\n        i0.ɵɵstyleProp(\"width\", (ctx.module.modules.length * 100).toString() + \"%\")(\"left\", \"calc(\" + (-ctx.currentPosition * 100).toString() + \"% + \" + (ctx.currentX - ctx.startX).toString() + \"px)\")(\"transition\", ctx.startX == 0.1 ? \"\" : \"none\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.module.modules);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.module.modules);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.windowService.windowWidth > ctx.windowService.minWidth);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i2.NgStyle, i3.ModuleFiltererComponent],\n    styles: [\".container[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content}.modules-container[_ngcontent-%COMP%]{width:100%;height:-moz-fit-content;height:fit-content;overflow:hidden}.module-container[_ngcontent-%COMP%]{width:300%;display:flex;align-items:center;position:relative;transition:left .3s ease}.dots-container[_ngcontent-%COMP%]{position:relative;top:-60px;text-align:center;transition:left .3s ease}.dot[_ngcontent-%COMP%]{cursor:pointer;height:13px;width:13px;margin-right:6px;background-color:#bbb;border-radius:50%;display:inline-block;transition:background .3s ease}.dot[_ngcontent-%COMP%]:hover{background:#717171}.arrows-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;left:50%;transform:translate(-50%);width:min(1344px,96%)}.arrows[_ngcontent-%COMP%]{cursor:pointer;position:relative;transform:translateY(-50%);font-size:70px;width:-moz-fit-content;width:fit-content}\"]\n  });\n  return CarouselComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}